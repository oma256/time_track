{% extends 'base.html' %}
{% load static staticfiles i18n %}

{% block title %}{% trans 'Страница изменения сотрудника' %}{% endblock %}

{% block content %}
    <main class="add-employee">
        {% include 'components/header.html' %}
        <div class="right">
            {% include 'components/right-header.html' %}
            <div class="">
                <h1>{% trans 'Изменить данные сотрудника' %}</h1>
                <div class="add-employee__content">
                    <form action="">
                        <div class="input">
                            <input type="text" value="{{ user_org.user.last_name }}" name="input1" id="input1_id" placeholder="{% trans 'Фамилия сотрудника' %}" required="required">
                            <label for="input1">{% trans 'Фамилия' %}</label>
                            <p id="input1_error_id" style="display: none;">{% trans 'Обязательное поле' %}</p>
                        </div>
                        <div class="input">
                            <input type="text" value="{{ user_org.user.first_name }}" name="input2" id="input2_id" placeholder="{% trans 'Имя сотрудника' %}" required="required">
                            <label for="input2">{% trans 'Имя' %}</label>
                            <p id="input2_error_id" style="display: none;">{% trans 'Обязательное поле' %}</p>
                        </div>
                        <div class="input">
                            <input type="text" value="{{ user_org.user.middle_name }}" name="input3" id="input3_id" placeholder="{% trans 'Отчество сотрудника' %}" required="required">
                            <label for="input3">{% trans 'Отчество' %}</label>
                            <p id="input3_error_id" style="display: none;">{% trans 'Обязательное поле' %}</p>
                        </div>
                        <div class="input">
                            <input type="text" value="{{ user_org.position }}" name="input4" id="input4_id" placeholder="{% trans 'Введите должность' %}" required="required">
                            <label for="input4">{% trans 'Должность' %}</label>
                            <p id="input4_error_id" style="display: none;">{% trans 'Обязательное поле' %}</p>
                        </div>
                        <div class="input">
                            <input type="text" value="{{ user_org.user.phone_number }}" name="input5" id="phone_id" placeholder="{% trans 'Введите номер телефона' %}" required="required">
                            <label for="input5">{% trans 'Номер телефона' %}</label>
                            <p id="input5_error_id" style="display: none;">{% trans 'Обязательное поле' %}</p>
                            <p id="number_exist_error_id" style="display: none;">{% trans 'Данный номер уже занят другим сотрудником' %}</p>
                        </div>
                        <div class="checkbox-all">
                            <div class="checkbox-and-radio set-time">
                                <div class="checkbox-block">
                                    <div class="checkbox">
                                        <input type="checkbox" id="checkbox3">
                                        <label for="checkbox3"></label>
                                    </div>
                                    <div class="checkbox-info">
                                        <div class="name">{% trans 'Персонально установить время начала и окончания рабочего дня' %}</div>
                                    </div>
                                </div>
                                <div class="select-content__time-all">
                                    <div class="select-content__start-time">
                                        <div class="time-start">{% trans 'Время начала' %}</div>
                                        <div class="start-time__block">
                                            <div class="select-content__all">
                                                <div class="select-content__time">
                                                    <div class="select-content__info">
                                                        <span id="begin-hour_id">{{ user_org.start_time|time:'H' }}</span>
                                                    </div>
                                                    <div class="select-content">
                                                        <div class="select-content__inner" id="begin_hour_time_id"></div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="select-content__all">
                                                <div class="select-content__time">
                                                    <div class="select-content__info">
                                                        <span id="begin-min_id">{{ user_org.start_time|time:'i' }}</span>
                                                    </div>
                                                    <div class="select-content">
                                                        <div class="select-content__inner" id="select-content__inner_begin_time_id"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="select-content__end-time">
                                        <div class="time-start">{% trans 'Время окончания' %}</div>
                                        <div class="end-time__block">
                                            <div class="select-content__all">
                                                <div class="select-content__time">
                                                    <div class="select-content__info">
                                                        <span id="end-hour_id">{{ user_org.end_time|time:'H' }}</span>
                                                    </div>
                                                    <div class="select-content">
                                                        <div class="select-content__inner" id="end_hour_time_id"></div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="select-content__all">
                                                <div class="select-content__time">
                                                    <div class="select-content__info">
                                                        <span id="end-min_id">{{ user_org.end_time|time:'i' }}</span>
                                                    </div>
                                                    <div class="select-content">
                                                        <div class="select-content__inner" id="select-content__inner_end_time_id"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="filter-block"></div>
                                </div>
                            </div>
                            <div class="checkbox-and-radio set-time">
                                <div class="checkbox-block">
                                    <div class="checkbox">
                                        <input type="checkbox" id="checkbox4">
                                        <label for="checkbox4"></label>
                                    </div>
                                    <div class="checkbox-info">
                                        <div class="name">{% trans 'Указать не штрафуемые минуты' %}</div>
                                    </div>
                                </div>
                                <div class="select-content__time-all">
                                    <div class="select-content__all">
                                        <div class="select-content__time">
                                            <div class="select-content__info">
                                                <span id="non-fined-min_id">{{ user_org.non_fined_minute }}</span>
                                            </div>
                                            <div class="select-content">
                                                <div class="select-content__inner" id="non_fined_minute_id"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="filter-block"></div>
                                </div>
                            </div>
                            <button type="button" id="save_button_id">{% trans 'Сохранить' %}</button>
                            <button class="red" type="button" id="remove_button_id">{% trans 'Удалить' %}</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div class="add-staff__modal-finish" id="success-modal-block_id" style="display: none;">
            <div class="modal-finish__content">
                <div class="modal-icon"></div>
                <p>{% trans 'Данные сотрудника успешно изменены' %}</p>
                <div class="modal-finish__close">
                    <span>{% trans 'Хорошо' %}</span>
                </div>
            </div>
        </div>
        <div class="add-staff__modal-finish" id="success-remove-modal-block_id" style="display: none;">
            <div class="modal-finish__content">
                <div class="modal-icon"></div>
                <p>{% trans 'Сотрудник успешно удален' %}</p>
            </div>
        </div>
    </main>
{% endblock %}

{% block script %}
    <script>
      const orgID = '{{ organization.id }}';
      const userOrgID = '{{ user_org.id }}';
      const departmentsByFilialEndpoint = '{% url "organizations:departments_list_filial" %}';
      const employeeCreateEndpoint = '{% url 'organizations:employee_create' org_pk=organization.id %}';
      const employeeEditEndpoint = '{% url "organizations:employee_edit" org_pk=organization.id user_org_pk=user_org.id %}'
    </script>
    <script src="https://unpkg.com/imask"></script>
    <script src="{% static 'js/utils/phone_fields.js' %}"></script>
    <script src="{% static 'js/utils/time_fields.js' %}"></script>
    <script src="{% static 'js/utils/cookie.js' %}"></script>
    <script src="{% static 'js/phone_input_mask.js' %}"></script>
    <script src="{% static 'js/staff/edit_employee.js' %}"></script>
{% endblock %}
